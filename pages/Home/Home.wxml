<wxs src='../../utils/util.wxs' module='tools' />
<view class="home" style="background-color: {{'#EBEDF0'}}">
    <!-- 顶部 滑块视图 -->
    <view class="topSwiper">
        <swiper class="swiperBox {{tools.dataLen(imgList) === 1 ? 'regular':''}}" autoplay circular duration="{{'1000'}}">
            <swiper-item class="swiper-item {{tools.dataLen(imgList) === 1 ? 'regular-item':''}}" wx:for="{{imgList}}" wx:key="index" catchtap="testFunc" catchtouchmove="{{tools.dataLen(imgList) === 1 ? 'catchtouchmove':''}}">
                <image class="topImg" src='{{item}}' />
                <view class="swiperText">
                    <view class="textOne">小汽车ETC</view>
                    <view class="textTwo">微信支付更省心</view>
                    <view class="textThree">通行95折/全国通行/过站免排队</view>
                    <view class="iconfont textFour">了解详情</view>
                </view>
            </swiper-item>
        </swiper>
    </view>
    <!-- 办理模块 -->
    <view class="module immediately" wx:if="{{isShowHandle || userFailBillList.length || !orderInfo}}">
        <view class="vehicle-info">
            <view class="vehicle-info-box" animation="{{animationVehicleInfo}}">
                <view>{{!passengerCarOrderInfo ? '使用微信支付的ETC' : passengerCarOrderInfo.vehPlates}}</view>
                <view class="sub-title">
                    <view wx:if="{{userFailBillList.length}}">{{userFailBillList[0].addTime}}</view>
                    <view wx:else>
                        {{passengerCarOrderInfo.selfStatus === 1 || passengerCarOrderInfo.selfStatus === 22 ? '无法正常划扣通行费' : ''}}
                        {{passengerCarOrderInfo.selfStatus === 2 || passengerCarOrderInfo.selfStatus === 4 || passengerCarOrderInfo.selfStatus === 23 ? '还差几步即可完成申办' : ''}}
                        {{passengerCarOrderInfo.selfStatus === 3 ? '当前订单未完成支付' : ''}}
                        {{passengerCarOrderInfo.selfStatus === 5 ? '签约微信支付，免密代扣' : ''}}
                        {{passengerCarOrderInfo.selfStatus === 6 ? '订单排队审核中' : ''}}
                        {{passengerCarOrderInfo.selfStatus === 7 ? '订单审核不通过' : ''}}
                        {{passengerCarOrderInfo.selfStatus === 8 ? '审核失败，车牌不可办理' : ''}}
                        {{passengerCarOrderInfo.selfStatus === 9 ? '签约银行卡代扣通行费' : ''}}
                        {{passengerCarOrderInfo.selfStatus === 10 ? '审核通过，设备即将发出' : ''}}
                        {{passengerCarOrderInfo.selfStatus === 11 ? '请按要求激活ETC' : ''}}
<!--                        {{passengerCarOrderInfo.selfStatus === 12 ? userFailBillList.length ? userFailBillList[0].addTime : '暂无通行账单' : ''}}-->
                        {{passengerCarOrderInfo.selfStatus === 16 ? '完成验证绑定代扣' : ''}}
                    </view>
                </view>
            </view>
            <view class="vehicle-info-box vehicle-info-trucks-box" animation="{{animationVehicleInfoForTrucks}}">
                <view>{{!truckOrderInfo ? '使用微信支付的ETC' : truckOrderInfo.vehPlates}}</view>
                <view class="sub-title">
                    <view wx:if="{{userFailBillList.length}}">{{userFailBillList[0].addTime}}</view>
                    <view wx:else>
                        {{truckOrderInfo.selfStatus === 1 || passengerCarOrderInfo.selfStatus === 22 ? '无法正常划扣通行费' : ''}}
                        {{truckOrderInfo.selfStatus === 2 || truckOrderInfo.selfStatus === 4 || truckOrderInfo.selfStatus === 14 ? '还差几步即可完成申办' : ''}}
                        {{truckOrderInfo.selfStatus === 3 ? '当前订单未完成支付' : ''}}
                        {{truckOrderInfo.selfStatus === 5 ? '签约微信支付，免密代扣' : ''}}
                        {{truckOrderInfo.selfStatus === 6 ? '订单排队审核中' : ''}}
                        {{truckOrderInfo.selfStatus === 7 ? '订单审核不通过' : ''}}
                        {{truckOrderInfo.selfStatus === 8 ? '审核失败，车牌不可办理' : ''}}
                        {{truckOrderInfo.selfStatus === 9 || truckOrderInfo.selfStatus === 21 ? '签约银行卡代扣通行费' : ''}}
                        {{truckOrderInfo.selfStatus === 10 ? '审核通过，设备即将发出' : ''}}
                        {{truckOrderInfo.selfStatus === 11 ? '请按要求激活ETC' : ''}}
<!--                        {{ truckOrderInfo.selfStatus === 12 ? userFailBillList.length ? userFailBillList[0].addTime : '暂无通行账单' : ''}}-->
                        {{truckOrderInfo.selfStatus === 13 || truckOrderInfo.selfStatus === 19 || truckOrderInfo.selfStatus === 20 ? '开通ETC电子账户' : ''}}
                        {{truckOrderInfo.selfStatus === 15 ? '请充值' + truckOrderInfo.holdBalance / 100 + '元作为保证金' + '' : ''}}
                        {{truckOrderInfo.selfStatus === 16 ? '完成验证绑定代扣' : ''}}
                        {{truckOrderInfo.selfStatus === 17 ? '请预充' + (truckOrderInfo.prechargeAmount || 0) / 100 + '元否则设备无法通行' + '' : ''}}
                    </view>
                </view>
            </view>
        </view>
        <view wx:if="{{!userFailBillList.length}}">
            <button wx:if="{{loginInfo.needBindingPhone !== 1 && orderInfo.selfStatus !== 12}}" class="btn" catchtap="onClickVehicle" animation="{{animationTransaction}}">
                {{!orderInfo ? '新增办理' : ''}}
                {{orderInfo.selfStatus === 1 || orderInfo.selfStatus === 22 ? '恢复签约' : ''}}
                {{orderInfo.selfStatus === 2 || orderInfo.selfStatus === 4 || orderInfo.selfStatus === 14 || orderInfo.selfStatus === 23 ? '继续办理' : ''}}
                {{orderInfo.selfStatus === 3 ? '去支付' : ''}}
                {{orderInfo.selfStatus === 5 || orderInfo.selfStatus === 9 ? (orderInfo.flowVersion === 7 ? '继续办理' : '去签约') : ''}}
                {{orderInfo.selfStatus === 6 || orderInfo.selfStatus === 8 || orderInfo.selfStatus === 10 ? '查看进度' : ''}}
                {{orderInfo.selfStatus === 7 && orderInfo.flowVersion !== 4 ? '修改资料' : ''}}
                {{orderInfo.selfStatus === 7 && orderInfo.flowVersion === 4 ? '取消办理' : ''}}
                {{orderInfo.selfStatus === 11 ? '去激活' : ''}}
                {{orderInfo.selfStatus === 13 ? '去开户' : ''}}
                {{orderInfo.selfStatus === 15 || orderInfo.selfStatus === 17 ? '去预充' : ''}}
                {{orderInfo.selfStatus === 16 || orderInfo.selfStatus === 19 || orderInfo.selfStatus === 20 || orderInfo.selfStatus === 21 ? '继续办理' : ''}}
                {{orderInfo.selfStatus === 18 ? '代扣通行费' : ''}}
            </button>
            <button wx:if="{{loginInfo.needBindingPhone === 1 && orderInfo.selfStatus !== 12 }}" class="btn" open-type="getPhoneNumber" bindgetphonenumber="onGetPhoneNumber" animation="{{animationTransaction}}">
                {{!orderInfo ? '新增办理' : ''}}
            </button>
        </view>
        <button wx:else class="btn" catchtap="onClickBill" animation="{{animationTransaction}}">
            立即补缴
        </button>
    </view>
    <!-- 模块1 账单查询 通行发票 权益商城 -->
    <view class="module moduleOne">
        <view class="moduleOneBox" wx:for="{{moduleOneList}}" wx:key="index" data-url="{{item.url}}" catchtap="onClickEntrance">
            <view class="imgTitle" data-statistics="{{item.statisticsEvent}}">
                <image src="{{item.icon}}" />
            </view>
            <view class="title">{{item.title}}</view>
            <view class="btn_two">{{item.btn}}</view>
        </view>
    </view>
    <!-- 模块2 出行贴心服务 -->
    <view class="moduleTwo" wx:if="{{tools.dataLen(moduleTwoList) > 0}}">
        <view class="head">出行贴心服务</view>
        <view class="moduleTwoBox">
            <view class="integral" wx:for="{{moduleTwoList}}" wx:key="index" catchtap="onClickSwiper" data-item="{{item}}">
                <image src="{{item.imgUrl}}" />
            </view>
        </view>
    </view>
    <!-- 模块3 ETC使用Tips 一期不做，待二期补充-->
    <view class="moduleThree" wx:if="{{false}}">
        <view class="head">ETC使用Tips</view>
        <view class="moduleThreeBox">
            <view class="directSeeding">
                <view class="leftImg">
                    <image src="{{'https://file.cyzl.com/g001/M00/B7/CF/oYYBAGO_qS-ASZFtAABBq9PjXMc834.png'}}" />
                </view>
                <view class="rightView">
                    <view class="directSeedingTitle">
                        <view>{{'换车后ETC怎么迁移？'}}</view>
                        <view class="directSeedingImg">
                            <view class="loginImg">
                                <image src="https://file.cyzl.com/g001/M00/B7/CF/oYYBAGO_qS-ASZFtAABBq9PjXMc834.png" />
                            </view>
                            <text style="color: {{true ? 'red' : 'green'}}">
                                {{true ? '直播中':'已休息'}}
                            </text>
                        </view>
                    </view>
                    <view class="lsBack" style="color: {{true ? 'red' : 'green'}}">
                        {{true ? '正在直播...' : '观看回放'}}
                    </view>
                    <view class="viewText">
                        <view>
                            <image src="https://file.cyzl.com/g001/M00/B7/CF/oYYBAGO_qS-ASZFtAABBq9PjXMc834.png" />
                        </view>
                        <text>12580</text>
                    </view>
                </view>
            </view>
        </view>
    </view>
    <!-- 占位 -->
    <view class="split"></view>
    <!-- 同盾  在需要采集设备信息的页面加入以下节点 -->
    <view wx:if="{{(hideFMCanvas != undefined) && !hideFMCanvas}}">
        <!-- 根据您页面的布局，修改margin-top的值 -->
        <canvas canvas-id='tdcanvas' style='margin-top:200rpx'></canvas>
    </view>
    <!-- 弹窗 -->
    <viewProcedure id="viewProcedure" bind:onHandle="viewProcedure" bind:btnMovingIntegral="btnMovingIntegral" data-value="false" viewTc="{{movingIntegralObj}}"></viewProcedure>
    <view-img id="viewImg" bind:onHandle="testFunc" data-value="false" viewTc="{{viewTc}}"></view-img>
    <popup1 id='dialog1' dialogContent="{{disclaimerDesc}}" bind:onHandle1="popUp"></popup1>
    <agreement-dialog id='agreement-dialog'></agreement-dialog>
    <!-- 测试弹窗 -->
    <popTipComp id="popTipComp" bind:onHandle="onHandle"></popTipComp>
</view>
